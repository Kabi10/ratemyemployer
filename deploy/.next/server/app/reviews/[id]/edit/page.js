(()=>{var e={};e.id=919,e.ids=[919],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},95103:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=t(70260),a=t(28203),i=t(25155),n=t.n(i),o=t(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d=["",{children:["reviews",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8756)),"C:\\Users\\kabil\\WebstormProjects\\ratemyemployer\\src\\app\\reviews\\[id]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"C:\\Users\\kabil\\WebstormProjects\\ratemyemployer\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\Users\\kabil\\WebstormProjects\\ratemyemployer\\src\\app\\reviews\\[id]\\edit\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/reviews/[id]/edit/page",pathname:"/reviews/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8740:(e,s,t)=>{Promise.resolve().then(t.bind(t,8756))},32708:(e,s,t)=>{Promise.resolve().then(t.bind(t,74480))},74480:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(45512),a=t(58009),i=t(79334),n=(t(86353),t(41415));function o(){(0,i.useParams)();let e=(0,i.useRouter)(),[s,t]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null);return o?(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-6"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"}),(0,r.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]})]})}):d||!s?(0,r.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,r.jsx)("div",{className:"bg-red-50 dark:bg-red-900 border-l-4 border-red-500 p-4 rounded",children:(0,r.jsx)("p",{className:"text-red-700 dark:text-red-200",children:d||"Review not found"})})}):(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Edit Review"}),(0,r.jsx)(n.H,{companyId:s.company_id,initialData:s,onSuccess:()=>{e.push("/account")}})]})}},33146:(e,s,t)=>{"use strict";t.d(s,{k:()=>o});var r=t(45512),a=t(44195),i=t(86235);let n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};function o({size:e="md",className:s,fullScreen:t=!1}){let o=(0,r.jsx)(i.A,{className:(0,a.cn)("animate-spin",n[e],s)});return t?(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:o}):o}},41415:(e,s,t)=>{"use strict";t.d(s,{H:()=>b});var r=t(45512),a=t(58009),i=t(6868),n=t(86353),o=t(65210),l=t(79334),d=t(33146),c=t(81914),m=t(16131),u=t(39400),p=t(77722);let x=m.Ik({content:m.Yj().min(20,"Content must be at least 20 characters").max(2e3,"Content must be less than 2000 characters"),rating:m.ai().min(1).max(5),pros:m.Yj().min(10,"Pros must be at least 10 characters").max(1e3,"Pros must be less than 1000 characters"),cons:m.Yj().min(10,"Cons must be at least 10 characters").max(1e3,"Cons must be less than 1000 characters"),position:m.Yj().min(1,"Position is required"),employment_status:m.k5(["FULL_TIME","PART_TIME","CONTRACT","INTERN"]),status:m.Yj().optional()});function b({companyId:e,initialData:s,onSuccess:t}){let{user:m}=(0,o.A)(),b=(0,l.useRouter)(),[h,f]=(0,a.useState)(!1),[g,v]=(0,a.useState)(null),[j,y]=(0,a.useState)(null),[N,w]=(0,a.useState)(!0),{register:k,handleSubmit:P,reset:_,formState:{errors:C}}=(0,i.mN)({resolver:(0,c.u)(x),defaultValues:{rating:s?.rating||3,content:s?.content||"",pros:s?.pros||"",cons:s?.cons||"",position:s?.position||"",employment_status:s?.employment_status||"FULL_TIME",status:s?.status}}),q=async r=>{if(!m){v("You must be logged in to submit a review");return}let a=j?.id||e;if(!a){v("Please select a company");return}f(!0),v(null);try{let e={...r,company_id:a,user_id:m.id,title:""};if(s?.id){let{error:t}=await n.N.from("reviews").update(e).eq("id",s.id);if(t)throw t}else{let{error:s}=await n.N.from("reviews").insert([e]);if(s)throw s}_(),t&&t(),b.push(`/companies/${a}`)}catch(e){v(e instanceof Error?e.message:"Failed to submit review")}finally{f(!1)}};return N?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,r.jsx)(d.k,{size:"lg"})}):(0,r.jsxs)("form",{onSubmit:P(q),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Content"}),(0,r.jsx)("textarea",{...k("content"),rows:4,className:"w-full p-3 border rounded-lg",placeholder:"Overall review content"}),C.content&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:C.content.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Rating"}),(0,r.jsx)(p.p,{type:"number",...k("rating",{valueAsNumber:!0}),min:"1",max:"5"}),C.rating&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:C.rating.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Employment Status"}),(0,r.jsxs)("select",{...k("employment_status"),className:"w-full p-3 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[(0,r.jsx)("option",{value:"FULL_TIME",children:"Full Time"}),(0,r.jsx)("option",{value:"PART_TIME",children:"Part Time"}),(0,r.jsx)("option",{value:"CONTRACT",children:"Contract"}),(0,r.jsx)("option",{value:"INTERN",children:"Intern"})]}),C.employment_status&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:C.employment_status.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Position"}),(0,r.jsx)(p.p,{...k("position"),placeholder:"Your position at the company"}),C.position&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:C.position.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Pros"}),(0,r.jsx)("textarea",{...k("pros"),rows:3,className:"w-full p-3 border rounded-lg",placeholder:"What did you like about working here?"}),C.pros&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:C.pros.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Cons"}),(0,r.jsx)("textarea",{...k("cons"),rows:3,className:"w-full p-3 border rounded-lg",placeholder:"What could be improved?"}),C.cons&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:C.cons.message})]}),g&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-red-600",children:g}),(0,r.jsx)(u.$,{type:"submit",className:"w-full",disabled:h,children:h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.k,{size:"sm",className:"mr-2"}),"Submitting..."]}):"Submit Review"})]})}},77722:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var r=t(45512),a=t(58009),i=t(44195);let n=a.forwardRef(({className:e,type:s,...t},a)=>(0,r.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));n.displayName="Input"},8756:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\kabil\\\\WebstormProjects\\\\ratemyemployer\\\\src\\\\app\\\\reviews\\\\[id]\\\\edit\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\kabil\\WebstormProjects\\ratemyemployer\\src\\app\\reviews\\[id]\\edit\\page.tsx","default")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,626,868,388,317],()=>t(95103));module.exports=r})();